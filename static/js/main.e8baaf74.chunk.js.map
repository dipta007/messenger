{"version":3,"sources":["lib/axios.js","lib/constants.js","components/LogIn.jsx","components/SignUp.jsx","components/Chat/ConversationListItem/index.jsx","components/Chat/Toolbar/index.jsx","components/Chat/ToolbarButton/index.jsx","components/Chat/UserSearch/index.jsx","components/Chat/ConversationList/index.jsx","components/Chat/Message/index.jsx","components/Chat/MessageList/index.jsx","components/Chat/index.jsx","App.js","serviceWorker.js","index.js"],"names":["Axios","axios","create","baseURL","headers","Authorization","localStorage","getItem","Copyright","Typography","variant","color","align","Link","href","Date","getFullYear","useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","LogIn","classes","React","useState","username","setUsername","password","setPassword","enqueueSnackbar","useSnackbar","history","useHistory","login","e","a","preventDefault","post","ret","setItem","data","access_token","userId","replace","response","message","useEffect","Container","component","maxWidth","CssBaseline","className","Avatar","onSubmit","TextField","required","fullWidth","label","name","autoComplete","autoFocus","onChange","target","value","type","Button","Grid","container","item","Box","mt","SignUp","setName","signup","closeSnackbar","push","xs","justify","ConversationListItem","id","photo","text","shave","location","useLocation","room","queryString","parse","search","onClick","src","alt","Toolbar","props","title","leftItems","rightItems","ToolbarButton","icon","UserSearch","isOpen","handleClose","email","setEmail","findUser","_id","console","log","Dialog","open","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","ConversationList","setSelectedConversation","conversations","setConversations","userSearchView","setUserSearchView","getConversations","get","newConversations","map","result","picture","large","key","conversation","Message","isMine","startsSequence","endsSequence","showTimestamp","friendlyTimestamp","moment","timestamp","format","join","socket","MessageList","msgs","setMsgs","msg","setMsg","messages","useSWR","roomDetails","MY_USER_ID","ref","useRef","current","scrollIntoView","behavior","io","on","emit","roomId","disconnect","payload","i","messageCount","length","tempMessages","previous","next","sender","currentMoment","previousMoment","previousDuration","duration","diff","as","nextMoment","nextDuration","renderMessages","style","float","clear","placeholder","Messenger","fetcher","url","then","res","App","maxSnack","path","Boolean","window","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.e8baaf74.chunk.js","sourcesContent":["import axios from 'axios';\nimport { API_URL } from './constants';\n\nconst Axios = axios.create({\n  baseURL: `${API_URL}`,\n  headers: {\n    Authorization: localStorage.getItem('token')\n        ? `Bearer ${localStorage.getItem('token')}`\n        : null,\n  },\n});\n\nexport default Axios;\n\nexport const uploadFile = async (api, data) => {\n  return await axios({\n    method: 'POST',\n    url: API_URL + api,\n    data,\n    headers: {\n      'Content-Type': 'multipart/form-data',\n      'Authorization':\n        typeof window !== 'undefined' && localStorage.getItem('token')\n          ? `Token ${localStorage.getItem('token')}`\n          : null,\n    },\n  });\n};\n","export const API_URL = 'http://localhost:8080'\nexport const WS_URL = 'http://localhost:8080'","import React from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Link from \"@material-ui/core/Link\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Box from \"@material-ui/core/Box\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"../lib/axios\";\nimport { useSnackbar } from \"notistack\";\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {\"Copyright © \"}\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\n        dipta007\n      </Link>{\" \"}\n      {new Date().getFullYear()}\n      {\".\"}\n    </Typography>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function LogIn() {\n  const classes = useStyles();\n\n  const [username, setUsername] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const { enqueueSnackbar } = useSnackbar();\n  const history = useHistory();\n\n  const login = async (e) => {\n    e.preventDefault();\n    try {\n      const ret = await axios.post(\"/login\", {\n        username,\n        password,\n      });\n      localStorage.setItem(\"token\", ret.data.access_token);\n      localStorage.setItem(\"userId\", ret.data.userId);\n      history.replace(\"/chat\");\n    } catch (err) {\n      enqueueSnackbar(err.response.data.message, { variant: \"error\" });\n    }\n  };\n\n  React.useEffect(() => {\n    if (localStorage.getItem(\"token\")) {\n      history.replace(\"/chat\");\n    }\n  }, []);\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Sign in\n        </Typography>\n        <form className={classes.form} onSubmit={login}>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            label=\"Email Address\"\n            name=\"email\"\n            autoComplete=\"email\"\n            autoFocus\n            onChange={(e) => setUsername(e.target.value)}\n            value={username}\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            autoComplete=\"current-password\"\n            type=\"password\"\n            onChange={(e) => setPassword(e.target.value)}\n            value={password}\n          />\n          {/* <FormControlLabel\n            control={<Checkbox value=\"remember\" color=\"primary\" />}\n            label=\"Remember me\"\n          /> */}\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n          >\n            Sign In\n          </Button>\n          <Grid container>\n            {/* <Grid item xs>\n              <Link href=\"#\" variant=\"body2\">\n                Forgot password?\n              </Link>\n            </Grid> */}\n            <Grid item>\n              <Link href=\"/signup\" variant=\"body2\">\n                {\"Don't have an account? Sign Up\"}\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n      <Box mt={8}>\n        <Copyright />\n      </Box>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Link from \"@material-ui/core/Link\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Box from \"@material-ui/core/Box\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"../lib/axios\";\nimport { useSnackbar } from \"notistack\";\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {\"Copyright © \"}\n      <Link color=\"inherit\" href=\"/\">\n        dipta007\n      </Link>{\" \"}\n      {new Date().getFullYear()}\n      {\".\"}\n    </Typography>\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(3),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function SignUp() {\n  const classes = useStyles();\n\n  const [name, setName] = React.useState(\"\");\n  const [username, setUsername] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const history = useHistory();\n\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  const signup = async (e) => {\n    e.preventDefault();\n    if (name && username && password) {\n      try {\n        await axios.post(\"/signup\", {\n          name,\n          username,\n          password,\n        });\n        history.push(\"/\");\n      } catch (err) {\n        enqueueSnackbar(err.response.data.message, { variant: \"error\" });\n      }\n    } else {\n      enqueueSnackbar(\"Please provide all the fields\", { variant: \"warning\" });\n    }\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Sign up\n        </Typography>\n        <form className={classes.form} onSubmit={signup}>\n          <Grid container spacing={2}>\n            <Grid item xs={12}>\n              <TextField\n                label=\"Name\"\n                onChange={(e) => setName(e.target.value)}\n                variant=\"outlined\"\n                required\n                fullWidth\n                autoFocus\n                value={name}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                variant=\"outlined\"\n                required\n                fullWidth\n                label=\"Email Address\"\n                name=\"email\"\n                autoComplete=\"email\"\n                onChange={(e) => setUsername(e.target.value)}\n                value={username}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                variant=\"outlined\"\n                required\n                fullWidth\n                name=\"password\"\n                label=\"Password\"\n                type=\"password\"\n                autoComplete=\"current-password\"\n                onChange={(e) => setPassword(e.target.value)}\n                value={password}\n              />\n            </Grid>\n          </Grid>\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n          >\n            Sign Up\n          </Button>\n          <Grid container justify=\"flex-end\">\n            <Grid item>\n              <Link href=\"/\" variant=\"body2\">\n                Already have an account? Sign in\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n      <Box mt={5}>\n        <Copyright />\n      </Box>\n    </Container>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport shave from \"shave\";\nimport queryString from \"query-string\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport \"./ConversationListItem.css\";\n\nexport default function ConversationListItem({ id, photo, name, text }) {\n  useEffect(() => {\n    shave(\".conversation-snippet\", 20);\n  });\n\n  const history = useHistory();\n  const location = useLocation();\n  const params = queryString.parse(location.search);\n  const { room } = params;\n\n  return (\n    <div\n      className={`conversation-list-item ${room === id ? 'active' : ''}`}\n      onClick={() => history.push(`/chat?room=${id}`)}\n    >\n      <img className=\"conversation-photo\" src={photo} alt=\"conversation\" />\n      <div className=\"conversation-info\">\n        <h1 className=\"conversation-title\">{name}</h1>\n        <p className=\"conversation-snippet\">{text}</p>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport './Toolbar.css';\n\nexport default function Toolbar(props) {\n    const { title, leftItems, rightItems } = props;\n    return (\n      <div className=\"toolbar\">\n        <div className=\"left-items\">{ leftItems }</div>\n        <h1 className=\"toolbar-title\">{ title }</h1>\n        <div className=\"right-items\">{ rightItems }</div>\n      </div>\n    );\n}","import React from \"react\";\nimport \"./ToolbarButton.css\";\n\nexport default function ToolbarButton({ icon, onClick = () => {} }) {\n  return <i className={`toolbar-button ${icon}`} onClick={onClick} />;\n}\n","import React from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  TextField,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\nimport axios from \"../../../lib/axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSnackbar } from \"notistack\";\n\nfunction UserSearch({ isOpen, handleClose }) {\n  const [email, setEmail] = React.useState(\"\");\n  const [name, setName] = React.useState(\"\");\n  const history = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const findUser = async () => {\n    try {\n      const ret = await axios.post(\"/conversations/open\", {\n        name,\n        username: email,\n      });\n      if (ret?.data?._id) {\n        setName(\"\");\n        setEmail(\"\");\n        handleClose();\n        history.push(`/chat?room=${ret.data._id}`);\n      } else {\n        enqueueSnackbar(\"User Not Found\", { variant: \"warning\" });\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onClose={handleClose}>\n      <DialogTitle id=\"form-dialog-title\">Find your Friend</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Type in the conversation name and friends email address\n        </DialogContentText>\n\n        <TextField\n          autoFocus\n          margin=\"dense\"\n          label=\"Conversation Name\"\n          type=\"text\"\n          fullWidth\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n        />\n\n        <TextField\n          margin=\"dense\"\n          label=\"Email Address\"\n          type=\"email\"\n          fullWidth\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button onClick={findUser} color=\"primary\">\n          Create\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport default UserSearch;\n","import React, { useState, useEffect } from \"react\";\n// import ConversationSearch from \"../ConversationSearch\";\nimport ConversationListItem from \"../ConversationListItem\";\nimport Toolbar from \"../Toolbar\";\nimport ToolbarButton from \"../ToolbarButton\";\nimport axios from \"../../../lib/axios\";\nimport UserSearch from \"../UserSearch\";\nimport \"./ConversationList.css\";\n\nexport default function ConversationList({ setSelectedConversation }) {\n  const [conversations, setConversations] = useState([]);\n  const [userSearchView, setUserSearchView] = useState(false);\n\n  useEffect(() => {\n    getConversations();\n  }, []);\n\n  const getConversations = async () => {\n    const response = await axios.get(\"/conversations/list\");\n    let newConversations = response?.data?.map((result) => {\n      return {\n        id: result._id,\n        photo:\n          result?.picture?.large ||\n          \"https://pbs.twimg.com/profile_images/857490466572443648/c05JqEgo.jpg\",\n        name: `${result.name}`,\n        text: \"\",\n      };\n    });\n    if (newConversations) {\n      setConversations([...conversations, ...newConversations]);\n    }\n  };\n\n  return (\n    <div className=\"conversation-list\">\n      <Toolbar\n        title=\"Messenger\"\n        leftItems={[\n          // <ToolbarButton key=\"cog\" icon=\"ion-ios-cog\" />\n        ]}\n        rightItems={[\n          <ToolbarButton key=\"add\" icon=\"ion-ios-add-circle-outline\" onClick={() => setUserSearchView(true)} />,\n        ]}\n      />\n      {/* <ConversationSearch /> */}\n      {conversations.map((conversation) => (\n        <ConversationListItem\n          key={conversation.name}\n          {...conversation}\n          setSelectedConversation={setSelectedConversation}\n        />\n      ))}\n\n      <UserSearch isOpen={userSearchView} handleClose={() => setUserSearchView(false)} />\n    </div>\n  );\n}\n","import React from \"react\";\nimport moment from \"moment\";\nimport \"./Message.css\";\n\nexport default function Message(props) {\n  const { data, isMine, startsSequence, endsSequence, showTimestamp } = props;\n\n  const friendlyTimestamp = moment(data.timestamp).format(\"LLLL\");\n  return (\n    <div\n      className={[\n        \"message\",\n        `${isMine ? \"mine\" : \"\"}`,\n        `${startsSequence ? \"start\" : \"\"}`,\n        `${endsSequence ? \"end\" : \"\"}`,\n      ].join(\" \")}\n    >\n      {showTimestamp && <div className=\"timestamp\">{friendlyTimestamp}</div>}\n\n      <div className=\"bubble-container\">\n        <div className=\"bubble\" title={friendlyTimestamp}>\n          {data.message}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect, useRef } from \"react\";\nimport io from \"socket.io-client\";\nimport Toolbar from \"../Toolbar\";\nimport ToolbarButton from \"../ToolbarButton\";\nimport Message from \"../Message\";\nimport moment from \"moment\";\nimport useSWR, { mutate } from \"swr\";\nimport \"./MessageList.css\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport { TextField } from \"@material-ui/core\";\nimport { WS_URL } from \"../../../lib/constants\";\n\nlet socket;\n\nexport default function MessageList() {\n  const [msgs, setMsgs] = useState([]);\n  const [msg, setMsg] = useState(\"\");\n  const history = useHistory();\n  const location = useLocation();\n  const params = queryString.parse(location.search);\n  const { room } = params;\n  const { data: messages } = useSWR(room ? `/message/all/${room}` : null);\n  const { data: roomDetails } = useSWR(\n    room ? `conversations/get/${room}` : null\n  );\n  const MY_USER_ID = localStorage.getItem(\"userId\");\n  const ref = useRef(null);\n\n  useEffect(() => {\n    setMsgs(messages || []);\n  }, [messages]);\n\n  useEffect(() => {\n    if (ref) {\n      ref.current.scrollIntoView({ behavior: \"smooth\" });\n    }\n  }, [msgs]);\n\n  useEffect(() => {\n    if (room) {\n      socket = io(WS_URL);\n\n      socket.on(\"connect\", () => {\n        socket.emit(\"JoinRoom\", { room, id: MY_USER_ID }, (roomId) => {\n          history.replace(`/chat?room=${roomId}`);\n        });\n      });\n      return () => {\n        socket.disconnect();\n      };\n    }\n  }, [room]);\n\n  useEffect(() => {\n    if (room) {\n      socket.on(\"Message\", (payload) => {\n        console.log(\"Got msg\", payload);\n        setMsgs((msgs) => [...msgs, payload]);\n      });\n    }\n  }, [room]);\n\n  const sendMessage = (e) => {\n    e.preventDefault();\n    const payload = { message: msg, sender: MY_USER_ID, roomId: room };\n    console.log(\"sent msg payload\", payload);\n    socket.emit(\"Message\", payload);\n    setMsg(\"\");\n    setMsgs((msgs) => [...msgs, payload]);\n  };\n\n  const renderMessages = () => {\n    let i = 0;\n    let messageCount = (msgs || []).length;\n    let tempMessages = [];\n\n    while (i < messageCount) {\n      let previous = msgs[i - 1];\n      let current = msgs[i];\n      let next = msgs[i + 1];\n      let isMine = current.sender === MY_USER_ID;\n      let currentMoment = moment(current.timestamp);\n      let prevBySameAuthor = false;\n      let nextBySameAuthor = false;\n      let startsSequence = true;\n      let endsSequence = true;\n      let showTimestamp = true;\n\n      if (previous) {\n        let previousMoment = moment(previous.timestamp);\n        let previousDuration = moment.duration(\n          currentMoment.diff(previousMoment)\n        );\n        prevBySameAuthor = previous.sender === current.sender;\n\n        if (prevBySameAuthor && previousDuration.as(\"hours\") < 1) {\n          startsSequence = false;\n        }\n\n        if (previousDuration.as(\"hours\") < 1) {\n          showTimestamp = false;\n        }\n      }\n\n      if (next) {\n        let nextMoment = moment(next.timestamp);\n        let nextDuration = moment.duration(nextMoment.diff(currentMoment));\n        nextBySameAuthor = next.sender === current.sender;\n\n        if (nextBySameAuthor && nextDuration.as(\"hours\") < 1) {\n          endsSequence = false;\n        }\n      }\n\n      tempMessages.push(\n        <Message\n          key={i}\n          isMine={isMine}\n          startsSequence={startsSequence}\n          endsSequence={endsSequence}\n          showTimestamp={showTimestamp}\n          data={current}\n        />\n      );\n\n      // Proceed to the next message.\n      i += 1;\n    }\n\n    return tempMessages;\n  };\n\n  return (\n    <div className=\"message-list\">\n      <Toolbar\n        title={roomDetails?.name}\n        rightItems={[\n          <ToolbarButton\n            key=\"info\"\n            icon=\"ion-ios-information-circle-outline\"\n          />,\n          // <ToolbarButton key=\"video\" icon=\"ion-ios-videocam\" />,\n          // <ToolbarButton key=\"phone\" icon=\"ion-ios-call\" />,\n        ]}\n      />\n      <div className=\"message-list-container\">\n        {room ? renderMessages() : <p>Select a conversation from left side.</p>}\n        <div style={{ float: \"left\", clear: \"both\" }} ref={ref} />\n      </div>\n\n      <form className=\"compose\" onSubmit={sendMessage}>\n        <TextField\n          fullWidth\n          placeholder=\"Type your message....\"\n          className=\"box-input\"\n          onChange={(e) => setMsg(e.target.value)}\n          value={msg}\n        />\n      </form>\n\n      {/* <Compose\n        rightItems={[\n          <ToolbarButton key=\"photo\" icon=\"ion-ios-camera\" />,\n          <ToolbarButton key=\"image\" icon=\"ion-ios-image\" />,\n          <ToolbarButton key=\"audio\" icon=\"ion-ios-mic\" />,\n          <ToolbarButton key=\"money\" icon=\"ion-ios-card\" />,\n          <ToolbarButton key=\"games\" icon=\"ion-logo-game-controller-b\" />,\n          <ToolbarButton key=\"emoji\" icon=\"ion-ios-happy\" />,\n        ]}\n      /> */}\n    </div>\n  );\n}\n","import React from \"react\";\nimport ConversationList from \"./ConversationList\";\nimport MessageList from \"./MessageList\";\nimport \"./Messenger.css\";\n\nexport default function Messenger() {\n  return (\n    <div className=\"messenger\">\n      <div className=\"scrollable sidebar\">\n        <ConversationList />\n      </div>\n\n      <div className=\"scrollable content\">\n        <MessageList />\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { SWRConfig } from \"swr\";\nimport { SnackbarProvider } from \"notistack\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport LogIn from \"./components/LogIn\";\nimport axios from \"./lib/axios\";\nimport SignUp from \"./components/SignUp\";\nimport ChatNew from './components/Chat/index';\n\nconst fetcher = (url) => axios.get(url).then((res) => res.data);\n\nfunction App() {\n  return (\n    <SWRConfig\n      value={{\n        fetcher,\n      }}\n    >\n      <SnackbarProvider maxSnack={4}>\n        <CssBaseline />\n        <Router>\n          <Switch>\n            <Route path=\"/signup\">\n              <SignUp />\n            </Route>\n            <Route path=\"/chat\">\n              <ChatNew />\n            </Route>\n            <Route path=\"/\">\n              <LogIn />\n            </Route>\n          </Switch>\n        </Router>\n      </SnackbarProvider>\n    </SWRConfig>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}